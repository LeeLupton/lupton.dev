<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Secure Financial Portal</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <style>
    body {
      background: #222; 
      color: #eee; 
      font-family: Arial, sans-serif; 
      margin: 0; 
      padding: 0;
    }
    /* Login Section Styling */
    #loginSection {
      text-align: center;
      padding: 30px;
    }
    #loginSection form {
      display: inline-block;
      margin-top: 20px;
    }
    #loginSection input[type="password"] {
      padding: 10px;
      font-size: 16px;
      width: 220px;
    }
    #loginSection button {
      padding: 10px 20px;
      font-size: 16px;
      margin-top: 10px;
    }
    #loginSection label {
      font-size: 14px;
      margin-left: 5px;
    }
    #errorMsg {
      color: red;
      margin-top: 10px;
    }
    /* Main Content that will be decrypted */
    #mainContent {
      display: none; /* Initially hidden */
      padding: 20px;
    }
  </style>
</head>
<body>

    <div id="loginSection">
    <h2>Please Log In to Access Your Portal</h2>
        <form id="loginForm" onsubmit="event.preventDefault(); decryptAndLoad();">
            <input type="password" id="loginPassword" name="loginPassword" placeholder="Enter your password" autocomplete="current-password">
      <br>
            <input type="checkbox" id="rememberCheckbox" name="rememberCheckbox">
      <label for="rememberCheckbox">Remember my password</label>
      <br>
      <button type="submit">Login</button>
    </form>
    <p id="errorMsg"></p>
  </div>

    <div id="mainContent">
     </div>

    <script>
    // !!! REPLACE THE VALUE BELOW WITH THE ACTUAL CIPHERTEXT GENERATED IN STEP 2 !!!
    var ciphertext = "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"; // <-- PASTE HERE

    // Function to decrypt the encrypted dashboard content.
    function decryptAndLoad() {
      var pwd = document.getElementById('loginPassword').value;
      if (!pwd) {
        document.getElementById("errorMsg").textContent = "Please enter a password.";
        return;
      }
      try {
        // Decrypt the ciphertext using the user-supplied password.
        var bytes = CryptoJS.AES.decrypt(ciphertext, pwd);
        var decryptedText = bytes.toString(CryptoJS.enc.Utf8);

        if (decryptedText) {
          // Inject the decrypted content into the mainContent div.
          // We need to handle potential script execution within the decrypted content.
          // A common way is to append it and let the browser handle parsing.
          var mainContentDiv = document.getElementById("mainContent");
          mainContentDiv.innerHTML = decryptedText; // Inject HTML

          // Find and execute scripts within the injected content
          var scripts = mainContentDiv.getElementsByTagName('script');
          for (var i = 0; i < scripts.length; i++) {
              var script = scripts[i];
              var newScript = document.createElement('script');
              // Copy attributes (like src)
              if (script.src) {
                  newScript.src = script.src;
                  // Ensure async/defer attributes are handled if needed, though often sync execution is expected here.
                  newScript.onload = function() {
                      // Check if the initializeDashboard function exists AFTER the script has loaded/executed
                      if (typeof initializeDashboard === "function") {
                          console.log("Calling initializeDashboard after script load.");
                          initializeDashboard();
                      }
                  };
                   newScript.onerror = function() { console.error("Error loading script: " + newScript.src);};
              } else {
                  newScript.textContent = script.textContent; // Copy inline script content
              }
              // Append the new script element to execute it.
              // Appending to head or body is common. Appending back into mainContent might work but can be less reliable.
              document.body.appendChild(newScript);
              // Remove the original placeholder script tag from the injected content
              // Or handle differently depending on desired script execution order.
              // For simplicity here, we assume initializeDashboard is defined by inline script or loaded synchronously.
              // script.parentNode.removeChild(script); // Careful with modifying collection while iterating
          }


          // Hide the login section, show the main content.
          document.getElementById("loginSection").style.display = "none";
          mainContentDiv.style.display = "block";

          // Attempt to call initializeDashboard immediately for inline scripts
          // Check if the function was defined by an *inline* script within decryptedText
          if (typeof initializeDashboard === "function") {
              console.log("Calling initializeDashboard immediately after injection (for inline scripts).");
              initializeDashboard();
          } else {
              console.log("initializeDashboard not found immediately after injection. Waiting for external scripts if any.");
          }

        } else {
          // This happens if the password is wrong OR if the decrypted text is empty
          document.getElementById("errorMsg").textContent = "Incorrect password or decryption failed.";
        }
      } catch (e) {
        // This catches errors during the decryption process itself (e.g., malformed ciphertext)
        console.error("Decryption error:", e);
        document.getElementById("errorMsg").textContent = "Decryption error. Check password or ciphertext integrity.";
      }
    }
  </script>
</body>
</html>
